<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>EDM Limit Calculator</title>

<script>
  window.MathJax = {
    tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] }
  };
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<style>
body {
    font-family: Arial, sans-serif;
    margin: 30px;
}

h1 {
    font-size: 2em;
    font-weight: bold;
    text-align: center;
    margin-bottom: 20px;
}

.panel-container {
    display: flex;
    gap: 90px;
    align-items: flex-start;
}

.panel {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
}

.panel img {
    margin-bottom: 10px;
}

.caption {
    font-weight: bold;
    margin-bottom: 5px;
    font-size: 1.3em;
}

.example {
    font-weight: normal;
    margin-bottom: 5px;
    font-size: 1em;
}

.form-row {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
}

.form-row label {
    width: 250px;
    font-weight: bold;
}

.form-row input {
    width: 80px;
    margin-right: 5px;
}

table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
}

td, th {
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;
}

tr:nth-child(even) {
  background-color: #dddddd;
}
</style>
</head>

<body>

<h1>EDM/MQM/NSM Limit Calculator</h1>

<p>
$\delta f = \frac{2}{h}\left(d_e\mathcal{E}_\textrm{eff} + MW_M + SW_S\right)$
</p>

<p>
$\delta f$: frequency resolution<br>
$d_e$: electron electric dipole moment (EDM)<br>
$\mathcal{E}_\textrm{eff}$: effective electric field<br>
$M$: nuclear magnetic quadrupole moment (MQM)<br>
$W_M$: MQM sensitivity parameter<br>
$S$: nuclear Schiff moment (NSM)<br>
$W_S$: NSM sensitivity parameter
</p>

<div class="panel-container">

<!-- Beam panel -->
<div class="panel">
    <div class="caption">beam type</div>
    <div class="example">(e.g. ACME I-III)</div>
    <img src="df_Beam.png" width="250">

    <div class="form-row">
      <label>Spin precession time:</label>
      <input type="number" value="0.005" id="tau_Beam" step="0.001" oninput="compute_Beam()"> s
    </div>
    <div class="form-row">
      <label>Count rate:</label>
      <input type="number" value="3e8" id="Ndot_Beam" step="1e7" oninput="compute_Beam()"> /s
    </div>
    <div class="form-row">
      <label>Data acquisition:</label>
      <input type="number" value="1" id="DAQ_Beam" oninput="compute_Beam()"> day
    </div>

    <p>$\rightarrow\delta f$ = <span id="out_df_Beam">0</span> $\mu$Hz</p>

    <div class="form-row">
      <label>$\mathcal{E}_{\rm eff}$:</label>
      <input type="number" id="Eeff_Beam" value="78" step="1" oninput="compute_Beam()"> GV/cm
      $\rightarrow d_e =~$ <span id="out_de_Beam">0</span>$~e\cdot{\rm cm}$
    </div>

    <div class="form-row">
      <label></label>
      $\boldsymbol{M_\textrm{NP} \textrm{(1-loop)} = }$<span id="out_NP_1_de_Beam">0</span>$~\mathrm{TeV}$
    </div> 

    <div class="form-row">
      <label></label>
      $\boldsymbol{M_\textrm{NP} \textrm{(2-loop)} = }$<span id="out_NP_2_de_Beam">0</span>$~\mathrm{TeV}$
    </div> 

    <div class="form-row">
      <label>$W_M$:</label>
      <input type="number" id="WM_Beam" value="1" step="1" oninput="compute_Beam()"> $\times10^{33}$ Hz/$e\cdot\rm{cm}^2~$
      $\rightarrow M =~$ <span id="out_M_Beam">0</span>$~e\cdot{\rm cm}^2$
    </div> 

    <div class="form-row">
      <label>$W_S$:</label>
      <input type="number" id="WS_Beam" value="30000" step="1000" oninput="compute_Beam()"> a.u.
      $\rightarrow S =~$ <span id="out_S_Beam">0</span>$~e\cdot{\rm fm}^3$
    </div> 
</div>

<!-- Trap panel -->
<div class="panel">
    <div class="caption">trap type – no multiplexing</div>
    <div class="example">(e.g. JILA EDM I&II)</div>
    <img src="df_Trap.png" width="250">

    <div class="form-row">
      <label>Spin precession time:</label>
      <input type="number" value="2.0" id="tau_Trap" step="0.1" oninput="compute_Trap()"> s
    </div>
    <div class="form-row">
      <label>N per shot:</label>
      <input type="number" value="500" id="Nshot_Trap" step="10" oninput="compute_Trap()">
    </div>
    <div class="form-row">
      <label>Data acquisition:</label>
      <input type="number" value="1" id="DAQ_Trap" oninput="compute_Trap()"> day
    </div>

    <p>$\rightarrow\delta f$ = <span id="out_df_Trap">0</span> $\mu$Hz</p>

    <div class="form-row">
      <label>$\mathcal{E}_{\rm eff}$:</label>
      <input type="number" id="Eeff_Trap" value="23" step="1" oninput="compute_Trap()"> GV/cm
      $\rightarrow d_e =~$ <span id="out_de_Trap">0</span>$~e\cdot{\rm cm}$
    </div>

    <div class="form-row">
      <label></label>
      $\boldsymbol{M_\textrm{NP} \textrm{(1-loop)} = }$<span id="out_NP_1_de_Trap">0</span>$~\mathrm{TeV}$
    </div> 

    <div class="form-row">
      <label></label>
      $\boldsymbol{M_\textrm{NP} \textrm{(2-loop)} = }$<span id="out_NP_2_de_Trap">0</span>$~\mathrm{TeV}$
    </div> 

    <div class="form-row">
      <label>$W_M$:</label>
      <input type="number" id="WM_Trap" value="1" step="1" oninput="compute_Trap()"> $\times10^{33}$ Hz/$e\cdot\rm{cm}^2~$
      $\rightarrow M =~$ <span id="out_M_Trap">0</span>$~e\cdot{\rm cm}^2$
    </div> 

    <div class="form-row">
      <label>$W_S$:</label>
      <input type="number" id="WS_Trap" value="30000" step="1000" oninput="compute_Trap()"> a.u.
      $\rightarrow S =~$ <span id="out_S_Trap">0</span>$~e\cdot{\rm fm}^3$
    </div>
</div>

<!-- Trap multiplexed panel -->
<div class="panel">
    <div class="caption">trap type – multiplexed</div>
    <div class="example">(e.g. JILA EDM III)</div>
    <img src="df_Trap_Multi.png" width="250">

    <div class="form-row">
      <label>Spin precession time:</label>
      <input type="number" value="20.0" id="tau_Trap_Multi" step="0.1" oninput="compute_Trap_Multi()"> s
    </div>
    <div class="form-row">
      <label>N per shot:</label>
      <input type="number" value="50" id="Nshot_Trap_Multi" oninput="compute_Trap_Multi()">
    </div>
    <div class="form-row">
      <label>Rep rate:</label>
      <input type="number" value="2" id="Frep_Trap_Multi" oninput="compute_Trap_Multi()"> Hz
    </div>
    <div class="form-row">
      <label>Data acquisition:</label>
      <input type="number" value="1" id="DAQ_Trap_Multi" oninput="compute_Trap_Multi()"> day
    </div>

    <p>$\rightarrow\delta f$ = <span id="out_df_Multi">0</span> $\mu$Hz</p>

    <div class="form-row">
      <label>$\mathcal{E}_{\rm eff}$:</label>
      <input type="number" id="Eeff_Trap_Multi" value="35" step="1" oninput="compute_Trap_Multi()"> GV/cm
      $\rightarrow d_e =~$ <span id="out_de_Trap_Multi">0</span>$~e\cdot{\rm cm}$
    </div>

    <div class="form-row">
      <label></label>
      $\boldsymbol{M_\textrm{NP} \textrm{(1-loop)} = }$<span id="out_NP_1_de_Trap_multi">0</span>$~\mathrm{TeV}$
    </div> 

    <div class="form-row">
      <label></label>
      $\boldsymbol{M_\textrm{NP} \textrm{(2-loop)} = }$<span id="out_NP_2_de_Trap_multi">0</span>$~\mathrm{TeV}$
    </div> 

    <div class="form-row">
      <label>$W_M$:</label>
      <input type="number" id="WM_Trap_Multi" value="1" step="1" oninput="compute_Trap_Multi()"> $\times10^{33}$ Hz/$e\cdot\rm{cm}^2~$
      $\rightarrow M =~$ <span id="out_M_Trap_Multi">0</span>$~e\cdot{\rm cm}^2$
    </div> 

    <div class="form-row">
      <label>$W_S$:</label>
      <input type="number" id="WS_Trap_Multi" value="30000" step="1000" oninput="compute_Trap_Multi()"> a.u.
      $\rightarrow S =~$ <span id="out_S_Trap_Multi">0</span>$~e\cdot{\rm fm}^3$
    </div>
</div>

</div>

<script>
function financial(x,i){ return Number.parseFloat(x).toFixed(i); }

function compute_Beam() {
    const tau = Number(document.getElementById('tau_Beam').value);
    const Ndot = Number(document.getElementById('Ndot_Beam').value);
    const TDAQ = Number(document.getElementById('DAQ_Beam').value) * 24*3600;
    const hbar = 1.054e-34;
    const eCharge = 1.602e-19;

    const df = 1 / (2*Math.PI*tau*Math.sqrt(Ndot*TDAQ))*1e6;
    document.getElementById('out_df_Beam').textContent = financial(df,3);

    const Eeff = Number(document.getElementById('Eeff_Beam').value)*1e9*1e2;
    const de = df*1e-6*(2*Math.PI*hbar/2)/Eeff/eCharge*1e2;
    document.getElementById('out_de_Beam').textContent = de.toExponential(2);

    const NP_de_1 = 48*Math.sqrt(1e-29/de);
    document.getElementById('out_NP_1_de_Beam').textContent = financial(NP_de_1,0);

    const NP_de_2 = 2*Math.sqrt(1e-29/de);
    document.getElementById('out_NP_2_de_Beam').textContent = financial(NP_de_2,0);

    const WM = Number(document.getElementById('WM_Beam').value)*1e33;
    const MQM = df*1e-6/2/WM;
    document.getElementById('out_M_Beam').textContent = MQM.toExponential(2);

    const WS = Number(document.getElementById('WS_Beam').value) * 44.8;
    const SM = df*1e-6 /2/ WS;
    document.getElementById('out_S_Beam').textContent = SM.toExponential(2);
}

function compute_Trap() {
    const tau = Number(document.getElementById('tau_Trap').value);
    const Nshot = Number(document.getElementById('Nshot_Trap').value);
    const TDAQ = Number(document.getElementById('DAQ_Trap').value) * 24*3600;
    const hbar = 1.054e-34;
    const eCharge = 1.602e-19;

    const df = 1 / (2*Math.PI*Math.sqrt(tau*Nshot*TDAQ))*1e6;
    document.getElementById('out_df_Trap').textContent = financial(df,3);

    const Eeff = Number(document.getElementById('Eeff_Trap').value)*1e9*1e2;
    const de = df*1e-6*(2*Math.PI*hbar/2)/Eeff/eCharge*1e2;
    document.getElementById('out_de_Trap').textContent = de.toExponential(2);

    const NP_de_1 = 48*Math.sqrt(1e-29/de);
    document.getElementById('out_NP_1_de_Trap').textContent = financial(NP_de_1,0);

    const NP_de_2 = 2*Math.sqrt(1e-29/de);
    document.getElementById('out_NP_2_de_Trap').textContent = financial(NP_de_2,0);

    const WM = Number(document.getElementById('WM_Trap').value)*1e33;
    const MQM = df*1e-6/2/WM;
    document.getElementById('out_M_Trap').textContent = MQM.toExponential(2);

    const WS = Number(document.getElementById('WS_Trap').value) * 44.8;
    const SM = df*1e-6 /2/ WS;
    document.getElementById('out_S_Trap').textContent = SM.toExponential(2);
}

function compute_Trap_Multi() {
    const tau = Number(document.getElementById('tau_Trap_Multi').value);
    const Nshot = Number(document.getElementById('Nshot_Trap_Multi').value);
    const Frep = Number(document.getElementById('Frep_Trap_Multi').value);
    const TDAQ = Number(document.getElementById('DAQ_Trap_Multi').value) * 24*3600;
    const hbar = 1.054e-34;
    const eCharge = 1.602e-19;

    const df = 1 / (2*Math.PI*tau*Math.sqrt(Frep*Nshot*TDAQ))*1e6;
    document.getElementById('out_df_Multi').textContent = financial(df,3);

    const Eeff = Number(document.getElementById('Eeff_Trap_Multi').value)*1e9*1e2;
    const de = df*1e-6*(2*Math.PI*hbar/2)/Eeff/eCharge*1e2;
    document.getElementById('out_de_Trap_Multi').textContent = de.toExponential(2);

    const NP_de_1 = 48*Math.sqrt(1e-29/de);
    document.getElementById('out_NP_1_de_Trap_multi').textContent = financial(NP_de_1,0);

    const NP_de_2 = 2*Math.sqrt(1e-29/de);
    document.getElementById('out_NP_2_de_Trap_multi').textContent = financial(NP_de_2,0);

    const WM = Number(document.getElementById('WM_Trap_Multi').value)*1e33;
    const MQM = df*1e-6/2/WM;
    document.getElementById('out_M_Trap_Multi').textContent = MQM.toExponential(2);

    const WS = Number(document.getElementById('WS_Trap_Multi').value) * 44.8;
    const SM = df*1e-6 /2/ WS;
    document.getElementById('out_S_Trap_Multi').textContent = SM.toExponential(2);
}

window.onload = function(){
    compute_Beam();
    compute_Trap();
    compute_Trap_Multi();
};
</script>

</body>
</html>
